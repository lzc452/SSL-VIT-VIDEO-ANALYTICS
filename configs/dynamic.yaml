# configs/dynamic.yaml

dataset:
  name: UCF101
  split: UCF101_val.txt
  num_classes: 101

model:
  embed_dim: 256
  # Use your best downstream checkpoint (recommended: FT-SSL-2stage best)
  finetune_ckpt: results/finetune/two_stage/finetune_epoch_28_top1_0.6715.pth

dynamic:
  mode: early_exit # early_exit | frame_gating | hybrid
  # Confidence thresholds (higher => more conservative, higher accuracy, less speedup)
  confidence_thresholds: [0.55, 0.65, 0.70, 0.75, 0.80, 0.85]
  # Allow exit only after observing at least min_frames frames
  min_frames: 4
  # Cap the maximum processed frames (usually equals clip_len)
  max_frames: 16
  # Process one frame every `frame_step` steps (>=1). Larger => more speedup, less accuracy.
  frame_step: 1

  # Frame gating knob (used by frame_gating & hybrid)
  gating_topk_list: [4, 6, 8, 10, 12, 16]
  gating_score: motion # motion | random

runtime:
  batch_size: 8
  num_warmup: 10
  num_measure: 50
  amp: true

output:
  save_dir: results/dynamic
  save_csv: true
